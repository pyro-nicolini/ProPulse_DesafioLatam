📜 Contrato API – ProPulse (alineado con DB) 
=================================================

🔐 AUTH
--------
POST   /auth/register            → crea usuario + token  
POST   /auth/login               → login + token  
GET    /auth/me                  → usuario autenticado  
POST   /auth/logout              → cerrar sesión  

👤 USUARIOS
------------
GET    /usuarios/{id_usuario}    → ver usuario  
PUT    /usuarios/{id_usuario}    → actualizar usuario  
DELETE /usuarios/{id_usuario}    → borrar usuario  

🛒 PRODUCTOS
--------------
GET    /productos                        → listar productos  
GET    /productos/{id_producto}          → ver producto  
POST   /admin/productos                  → crear producto  
PUT    /admin/productos/{id_producto}    → actualizar producto  
DELETE /admin/productos/{id_producto}    → borrar producto  
PUT    /admin/productos/{id_producto}/destacado → marcar/editar destacado  

🛍️ CARRITOS
-------------
POST   /carritos                 → crear carrito  
GET    /carritos/me              → mi carrito  
PUT    /carritos/{id_carrito}    → actualizar carrito  
DELETE /carritos/{id_carrito}    → borrar carrito  

Ítems de carrito:
POST   /carritos/{id_carrito}/items               → agregar ítem  
PUT    /carritos/{id_carrito}/items/{id_detalle}  → editar ítem (front usa id_item)  
DELETE /carritos/{id_carrito}/items/{id_detalle}  → eliminar ítem (front usa id_item)  

📦 PEDIDOS
------------
POST   /pedidos                  → crear pedido  
GET    /pedidos                  → historial de pedidos  
GET    /pedidos/{id_pedido}      → ver pedido  
PUT    /admin/pedidos/{id_pedido}→ actualizar estado (admin)  

⭐ RESEÑAS
-----------
GET    /productos/{id_producto}/resenas → listar reseñas  
POST   /productos/{id_producto}/resenas → crear reseña  

❤️ LIKES / FAVORITOS
----------------------
POST   /favoritos                → dar like  
GET    /favoritos                → listar favoritos (puede usar ?_expand=producto)  
DELETE /favoritos/{id_like}      → quitar like  
GET    /productos/{id_producto}/likes → contar likes  

📝 Tabla de Responsabilidades Front vs Back
==========================================

┌────────────┬──────────────────────────────────────────────┬──────────────────────────────────────┬──────────────────────────────────────────────────────────────┬────────────────────────────────────────────────────────────┐
│   Área     │ Frontend envía                              │ Backend devuelve                     │ Backend calcula/valida                                      │ ❌ Lo que NO hace el Frontend                             │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ 🔐 Auth    │ nombre, email, password (registro)           │ user + token                         │ genera fecha_creacion                                       │ no genera fechas ni tokens, solo envía credenciales        │
│            │ email, password (login)                      │                                      │                                                              │                                                            │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ 👤 Usuarios│ cambios de nombre/avatar                      │ user actualizado                     │ controla unicidad de email, guarda cambios con fecha         │ no valida unicidad, no asigna roles ni fechas             │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ 🛒 Productos│ título, descripción, precio, stock, tipo,    │ producto con id_producto,             │ valida stock=NULL en servicios, genera fecha_creacion        │ no crea IDs, no fuerza fecha_creacion, no valida stock-serv│
│            │ imagen                                       │ fecha_creacion                        │                                                              │                                                            │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ 🛍️ Carritos│ {id_producto, cantidad}                      │ item con precio_unitario, subtotal,   │ fija precio unitario, calcula subtotal, valida stock         │ no calcula subtotal, no congela precios, no valida stock   │
│            │                                              │ fecha_creacion                        │                                                              │ real                                                       │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ 📦 Pedidos │ {id_carrito, cupon?}                         │ pedido con detalle, total,            │ suma totales, aplica descuentos, IVA/envío, controla estado  │ no calcula totales/IVA, no decide estados, no aplica desc. │
│            │                                              │ fecha_pedido                          │                                                              │                                                            │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ ⭐ Reseñas  │ {comentario, calificacion}                   │ reseña con fecha_creacion             │ asegura 1 reseña por usuario-producto                        │ no garantiza unicidad de reseñas, no crea fecha_creacion   │
├────────────┼──────────────────────────────────────────────┼──────────────────────────────────────┼──────────────────────────────────────────────────────────────┼────────────────────────────────────────────────────────────┤
│ ❤️ Likes   │ {id_producto}                                │ like con id_like, fecha_creacion      │ asegura 1 like por usuario-producto, devuelve conteo total   │ no cuenta likes, no garantiza unicidad, no asigna fechas   │
└────────────┴──────────────────────────────────────────────┴──────────────────────────────────────┴──────────────────────────────────────────────────────────────┴────────────────────────────────────────────────────────────┘


🚫 Regla de oro:  
El Frontend nunca envía ni calcula → fecha_creacion, subtotal, total, precio_unitario, ni estados forzados.  
El Backend siempre valida y calcula → stock, precios, subtotales/totales, fechas, descuentos, IVA, unicidad y transiciones.
